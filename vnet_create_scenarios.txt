az group create -g tjp-rg -l westus
az network vnet create -g tjp-rg -n vnet1 --defer > 1.json
az network vnet subnet create -g tjp-rg --vnet-name vnet1 -n subnet1 --address-prefix 10.0.1.0/24 --defer > 2.json < 1.json
az network vnet subnet create -g tjp-rg --vnet-name vnet1 -n subnet2 --address-prefix 10.0.2.0/24 --defer > 3.json < 2.json
az network vnet update -g tjp-rg -n vnet1 < 3.json

az group create -g tjp-rg -l westus
az network vnet create -g tjp-rg -n vnet1 --defer |
az network vnet subnet create -g tjp-rg --vnet-name vnet1 -n subnet1 --address-prefix 10.0.1.0/24 --defer |
az network vnet subnet create -g tjp-rg --vnet-name vnet1 -n subnet2 --address-prefix 10.0.2.0/24 --defer |
az network vnet update -g tjp-rg -n vnet1
